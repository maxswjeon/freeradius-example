# Freeradius with OpenLDAP Example
 This is an example for Freeradius and OpenLDAP Integration

## Configuration and Depolyment
1. Fill in the blanks of `.env.template` and rename it to `.env`. All the data filled in will be applied automatically to the containers. 
2. Run `bootstrap.sh` and wait. `bootstrap.sh` creates a 4096 bit DH Parameters. You can copy DH parameters to `data/dhparam` that you have already generated and skip this step
3. OpenLDAP server MUST be accessible by `DOMAIN:OPENLDAP_LDAP_PORT`. Appropriate measures (Port Forwarding, etc.) must be taken.

## Docker Containers
### Certbot
 Certbot is used for Certificate Generation. Specifically, [certbot/dns-cloudflare](https://hub.docker.com/r/certbot/dns-cloudflare) is used. May be tweeked to use other dns-01 methods.  

 Certbot generates single domain certificate for the domain that specified in the `.env` file. Certificate will be renewed every 24 hours.

### Database
 RADIUS Authentication Logs will be stored here.

### OpenLDAP
 Data for authentication will be stored here.

### Freeradius
 The main Freeradius Container is required.

## File Management
 Files are stored as written below.
```
- config
  - freeradius
  - ldap
- data
  - certbot
  - certs
  - database
  - dhparam
  - ldap
- scripts
- bootstrap.sh
- clean.sh
- docker-compose.yml
- README.md
```

### `config/freeradius`
 These files will be copied into the containers. MUST NOT BE REMOVED.

### `config/ldap`
 These files are generated by the OpenLDAP container.

### `data/certbot`
 These files are generated by the Certbot container. Should not be removed to prevent duplicate certificate issuance.

### `data/certs`
 These files are copied files from `data/certbot` folder. File permissions are set to each container requirements.

### `data/database`
 These files are generated by the PostgreSQL container.

### `data/dhparam`
 This file is used to set dhparam for OpenLDAP Server

### `data/ldap`
 These files are generated by the OpenLDAP conatiner.

### `scripts`
 These files are init scripts for the containers. MUST NOT BE REMOVED.

### `bootstrap.sh`
 Creates `data/dhparam`

### `clean.sh`
 Deletes `config/ldap`, `data/database`, `data/ldap` to reset all data.

### `docker-compose.yml`
 The main docker compose file

### `README.md`
 This file.
